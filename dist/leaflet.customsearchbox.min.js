function getControlHrmlContent() {
	return '<div id="controlbox" ><div id="boxcontainer" class="searchbox searchbox-shadow" > <div class="searchbox-menu-container"><button aria-label="Menu" id="searchbox-menubutton" class="searchbox-menubutton"></button> <span aria-hidden="true" style="display:none">Menu</span> </div><div><input id="searchboxinput" type="text" style="position: relative;"/></div><div class="searchbox-searchbutton-container"><button aria-label="search" id="searchbox-searchbutton" class="searchbox-searchbutton"></button> <span aria-hidden="true" style="display:none;">search</span> </div></div></div><div class="panel"> <div class="panel-header"> <div class="panel-header-container"> <span class="panel-header-title"></span> <button aria-label="Menu" id="panelbutton" class="panel-close-button"></button> </div></div><div class="panel-content"> </div></div>'
}

function generateHtmlContent(a) {
	for (var b = '<ul class="panel-list">', d = 0; d < a.Items.length; d++) {
		var c = a.Items[d],
			b = b + '<li class="panel-list-item"><div>';
		"link" == c.type ? (b += '<span class="panel-list-item-icon ' + c.icon + '" ></span>', b += '<a href="' + c.href + '">' + c.name + "</a>") : "button" == c.type && (b += '<span class="panel-list-item-icon ' + c.icon + '" ></span>', b += '<button onclick="' + c.onclick + '">' + c.name + "</button>");
		b += "</li></div>"
	}
	return b + "</ul>"
}

function createSearchboxControl() {
	return L.Control.extend({
		options: {
			position: "top"
		},
		initialize: function(a) {
			L.Util.setOptions(this, a)
		},
		onAdd: function(a) {
			a = L.DomUtil.create("div");
			a.id = "controlcontainer";
			var b = this._sideBarHeaderTitle,
				d = this._sideBarMenuItems,
				c = this._searchfunctionCallBack;
			$(a).html(getControlHrmlContent());
			setTimeout(function() {
				$("#searchbox-searchbutton").click(function() {
					var a = $("#searchboxinput").val();
					c(a)
				});
				$("#searchbox-menubutton").click(function() {
					$(".panel").toggle("slide", {
						direction: "left"
					}, 500)
				});
				$(".panel-close-button").click(function() {
					$(".panel").toggle("slide", {
						direction: "left"
					}, 500)
				});
				$(".panel-header-title").text(b);
				var a = generateHtmlContent(d);
				$(".panel-content").html(a)
			}, 1);
			L.DomEvent.disableClickPropagation(a);
			return a
		}
	})
};
